---
import { Image } from "astro:assets";
// src/components/home/HeroSection.astro
---

<section
  class="relative bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 text-white py-20 md:py-32 overflow-hidden"
>
  <!-- Effet de particules en arrière-plan -->
  <div class="absolute inset-0 opacity-10">
    <div
      class="absolute top-10 left-10 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse"
    >
    </div>
    <div
      class="absolute top-40 right-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"
    >
    </div>
    <div
      class="absolute bottom-10 left-1/2 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-4000"
    >
    </div>
  </div>

  <div class="container mx-auto px-6 relative z-10">
    <div
      class="flex flex-col md:flex-row items-center md:items-start md:justify-between gap-12"
    >
      {/* Texte à gauche */}
      <div class="flex-1 text-center md:text-left animate-fade-in-up">
        <div
          class="inline-block px-4 py-2 bg-blue-600/20 backdrop-blur-sm rounded-full text-blue-300 text-sm font-medium mb-6 border border-blue-400/30"
        >
          ✨ Innovation & Élégance
        </div>
        <h1
          class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-blue-100 to-blue-200 bg-clip-text text-transparent leading-tight"
        >
          Miroirs LED intelligents pour des espaces modernes
        </h1>
        <p
          class="text-lg md:text-xl text-slate-300 mb-10 max-w-3xl mx-auto md:mx-0 leading-relaxed"
        >
          Choisis par les professionnels de l'hôtellerie, de la santé et de la
          décoration d'intérieur. Découvrez l'alliance parfaite entre
          technologie et design.
        </p>
        <div
          class="flex flex-col sm:flex-row justify-center md:justify-start items-center space-y-4 sm:space-y-0 sm:space-x-4"
        >
          <a
            href="#contact"
            class="group bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-8 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 text-lg w-full sm:w-auto transform hover:scale-105 hover:-translate-y-1"
          >
            <span class="flex items-center justify-center gap-2">
              Demander un devis
              <svg
                class="w-5 h-5 group-hover:translate-x-1 transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </span>
          </a>
          <a
            href="#solutions"
            class="group bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-semibold py-4 px-8 rounded-xl border border-white/30 hover:border-white/50 transition-all duration-300 text-lg w-full sm:w-auto transform hover:scale-105"
          >
            <span class="flex items-center justify-center gap-2">
              Découvrir nos produits
              <svg
                class="w-5 h-5 group-hover:rotate-45 transition-transform"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                ></path>
              </svg>
            </span>
          </a>
        </div>
      </div>
      {/* Image à droite remplacée par un slider */}
      <div
        class="flex-1 mt-16 md:mt-0 max-w-xl mx-auto md:mx-0 animate-fade-in-right"
      >
        <div
          id="hero-slider"
          class="relative w-full aspect-square max-w-[600px] rounded-2xl shadow-2xl overflow-hidden mx-auto transform hover:scale-105 transition-transform duration-500 border border-white/20"
        >
          <img
            id="slider-image"
            src="/images/solutions-miroirs-intelligensts.jpg"
            alt="Miroir LED intelligent installé dans un espace moderne"
            class="w-full h-full object-cover transition-opacity duration-500"
          />
          {/* Boutons de navigation */}
          <button
            id="slider-prev"
            type="button"
            class="absolute left-2 top-1/2 -translate-y-1/2 bg-slate-800/60 text-white rounded-full p-2 hover:bg-blue-600 transition"
          >
            &#8592;
          </button>
          <button
            id="slider-next"
            type="button"
            class="absolute right-2 top-1/2 -translate-y-1/2 bg-slate-800/60 text-white rounded-full p-2 hover:bg-blue-600 transition"
          >
            &#8594;
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  const images = [
    "/images/hero1.jpg",
    "/images/hero2.jpg",
    // Ajoute ici d'autres images de ton dossier public/images
  ];
  let current = 0;
  const img = document.getElementById("slider-image");
  const prev = document.getElementById("slider-prev");
  const next = document.getElementById("slider-next");
  const slider = document.getElementById("hero-slider"); // Get the slider container

  function showImage(idx) {
    if (!img) return;
    img.style.opacity = 0;
    setTimeout(() => {
      img.src = images[idx];
      img.style.opacity = 1;
    }, 200); // Match transition duration
  }

  prev?.addEventListener("click", () => {
    current = (current - 1 + images.length) % images.length;
    showImage(current);
  });
  next?.addEventListener("click", () => {
    current = (current + 1) % images.length;
    showImage(current);
  });

  // Touch swipe functionality
  let touchStartX = 0;
  let touchEndX = 0;
  const swipeThreshold = 50; // Minimum distance for a swipe

  slider?.addEventListener(
    "touchstart",
    (event) => {
      touchStartX = event.changedTouches[0].screenX;
    },
    { passive: true }
  );

  slider?.addEventListener("touchend", (event) => {
    touchEndX = event.changedTouches[0].screenX;
    handleSwipe();
  });

  function handleSwipe() {
    const swipeDistance = touchEndX - touchStartX;
    if (Math.abs(swipeDistance) >= swipeThreshold) {
      if (swipeDistance < 0) {
        // Swiped left (next image)
        current = (current + 1) % images.length;
      } else {
        // Swiped right (previous image)
        current = (current - 1 + images.length) % images.length;
      }
      showImage(current);
    }
  }
</script>
